// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: posts.sql

package database

import (
	"context"
	"database/sql"
	"time"

	"github.com/google/uuid"
)

const createPost = `-- name: CreatePost :one
INSERT INTO posts (id, created_at, last_synced_at, source_id, is_archived, network_internal_id, content)
VALUES (
    $1,
    $2,
    $3,
    $4,
    $5,
    $6,
    $7
)
RETURNING id, created_at, last_synced_at, source_id, is_archived, network_internal_id, content
`

type CreatePostParams struct {
	ID                uuid.UUID
	CreatedAt         time.Time
	LastSyncedAt      time.Time
	SourceID          uuid.UUID
	IsArchived        bool
	NetworkInternalID string
	Content           sql.NullString
}

func (q *Queries) CreatePost(ctx context.Context, arg CreatePostParams) (Post, error) {
	row := q.db.QueryRowContext(ctx, createPost,
		arg.ID,
		arg.CreatedAt,
		arg.LastSyncedAt,
		arg.SourceID,
		arg.IsArchived,
		arg.NetworkInternalID,
		arg.Content,
	)
	var i Post
	err := row.Scan(
		&i.ID,
		&i.CreatedAt,
		&i.LastSyncedAt,
		&i.SourceID,
		&i.IsArchived,
		&i.NetworkInternalID,
		&i.Content,
	)
	return i, err
}

const getPostByNetworkAndId = `-- name: GetPostByNetworkAndId :one
SELECT posts.id, posts.created_at, posts.last_synced_at, posts.source_id, posts.is_archived, posts.network_internal_id, posts.content FROM posts
join sources on posts.source_id = sources.id
where network_internal_id = $1 and sources.network = $2
`

type GetPostByNetworkAndIdParams struct {
	NetworkInternalID string
	Network           string
}

func (q *Queries) GetPostByNetworkAndId(ctx context.Context, arg GetPostByNetworkAndIdParams) (Post, error) {
	row := q.db.QueryRowContext(ctx, getPostByNetworkAndId, arg.NetworkInternalID, arg.Network)
	var i Post
	err := row.Scan(
		&i.ID,
		&i.CreatedAt,
		&i.LastSyncedAt,
		&i.SourceID,
		&i.IsArchived,
		&i.NetworkInternalID,
		&i.Content,
	)
	return i, err
}
