</main>

<footer class="container text-center" style="color: var(--color-text-muted); font-size: 0.85rem;">
    <p><a href="https://github.com/fluffyriot/commission-tracker" target="_blank">Commission Tracker by Fluffy Riot.</a>
        v{{.app_version}} &copy; 2026</p>
</footer>

<script>
    lucide.createIcons();

    function submitWithConfirm(form, message) {
        if (message && !window.confirm(message)) {
            return false;
        }

        const btn = form.querySelector('button[type="submit"]');
        const originalContent = btn ? btn.innerHTML : '';
        if (btn) {
            btn.disabled = true;
            btn.classList.add('loading');
            btn.innerHTML = '<i data-lucide="loader-2" class="spin"></i> Processing...';
            lucide.createIcons();
        }

        fetch(form.action, {
            method: form.method,
            body: new FormData(form)
        })
            .then(res => {
                if (res.ok) {
                    window.location.reload();
                } else {
                    res.text().then(text => alert("Operation failed: " + text));
                    if (btn) {
                        btn.disabled = false;
                        btn.innerHTML = originalContent;
                        lucide.createIcons();
                    }
                }
            })
            .catch(err => {
                console.error(err);
                alert("Error performing operation");
                if (btn) {
                    btn.disabled = false;
                    btn.innerHTML = originalContent;
                    lucide.createIcons();
                }
            });

        return false;
    }

    window.addEventListener('DOMContentLoaded', () => {
        lucide.createIcons();
    });
</script>

<style>
    .spin {
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        100% {
            transform: rotate(360deg);
        }
    }

    .text-main {
        color: var(--color-text-main);
        font-weight: bold;
    }

    .text-muted {
        color: var(--color-text-muted);
    }
</style>
</body>

</html>