{{ template "header.html" . }}

<div class="flex justify-between items-center mb-4">
    <div>
        <h1>Sync Settings</h1>
    </div>
</div>

<div class="card">
    <div class="card-header">Syncer Configuration</div>

    <form method="POST" action="/settings/sync" style="padding: 1.5rem;">

        <div class="form-group" style="margin-bottom: 1.5rem;">
            <label for="sync_period" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Sync
                Period</label>
            <select name="sync_period" id="sync_period" class="form-select" style="width: 100%; max-width: 300px;">
                <option value="15m" {{if eq .sync_period "15m" }}selected{{end}}>15 minutes</option>
                <option value="30m" {{if eq .sync_period "30m" }}selected{{end}}>30 minutes</option>
                <option value="1h" {{if eq .sync_period "1h" }}selected{{end}}>1 hour</option>
                <option value="6h" {{if eq .sync_period "6h" }}selected{{end}}>6 hours</option>
                <option value="12h" {{if eq .sync_period "12h" }}selected{{end}}>12 hours</option>
                <option value="24h" {{if eq .sync_period "24h" }}selected{{end}}>24 hours</option>
            </select>
            <p class="text-muted" style="margin-top: 0.5rem; font-size: 0.875rem;">How often the worker should
                automatically sync all sources and targets</p>
        </div>

        <div class="form-group" style="margin-bottom: 1.5rem;">
            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                <input type="checkbox" name="enabled_on_startup" id="enabled_on_startup" {{if
                    .enabled_on_startup}}checked{{end}} style="width: 18px; height: 18px; cursor: pointer;">
                <span style="font-weight: 500;">Enable worker on startup</span>
            </label>
            <p class="text-muted" style="margin-top: 0.5rem; margin-left: 1.625rem; font-size: 0.875rem;">
                When enabled, the worker will automatically start when the application launches
            </p>
        </div>

        <div class="flex gap-2">
            <button type="submit" class="btn btn-primary"
                onclick="return submitWithConfirm(this, 'System will turn on or restart the worker with your new settings. Do you want to continue?');">
                <i data-lucide="save"></i> Save Settings
            </button>
        </div>
    </form>
</div>

<div class="card" style="margin-top: 1.5rem;">
    <div class="card-header">Manual Control</div>

    <div style="padding: 1.5rem;">
        <p class="text-muted" style="margin-bottom: 1rem;">
            Manually control the background worker or reset to default settings.
        </p>

        <div class="flex gap-2" style="flex-wrap: wrap;">
            <form method="POST" action="/settings/sync/reset"
                onsubmit="return submitWithConfirm(this, 'Reset to default settings (30m interval, enabled on startup)?');">
                <button type="submit" class="btn btn-secondary">
                    <i data-lucide="rotate-ccw"></i> Reset to Defaults
                </button>
            </form>

            <form method="POST" action="/settings/sync/start">
                <button type="submit" class="btn btn-primary">
                    <i data-lucide="play"></i> Start Worker
                </button>
            </form>

            <form method="POST" action="/settings/sync/stop"
                onsubmit="return submitWithConfirm(this, 'Stop the background worker?');">
                <button type="submit" class="btn btn-danger">
                    <i data-lucide="square"></i> Stop Worker
                </button>
            </form>
        </div>
    </div>
</div>

{{ template "footer.html" . }}